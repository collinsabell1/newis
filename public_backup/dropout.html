<!DOCTYPE html>
<html>
<head>
  <title>Dropout Risk Prediction</title>
</head>
<body>

<h1>ðŸ“• Dropout Risk Prediction</h1>

<form id="riskForm">

  <label>Student ID:</label><br>
  <input type="text" id="studentId" required><br><br>

  <label>Academic Risk:</label><br>
  <input type="number" id="academicRisk" required><br><br>

  <label>Assessment Risk:</label><br>
  <input type="number" id="assessmentRisk" required><br><br>

  <label>Behavior Score (0-100):</label><br>
  <input type="number" id="behaviorScore" required><br><br>

  <button type="submit">Calculate & Save</button>

</form>

<h2 id="result"></h2>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";
const supabase = createClient("https://xnvnskxcsphbvkxhndui.supabase.co","YOUR_KEY");


import { initializeApp } from 

import { getFirestore, collection, addDoc } 

/* ðŸ” FIREBASE CONFIG */

}

document.getElementById("riskForm")
.addEventListener("submit", async (e)=>{

 e.preventDefault();

 const studentId = document.getElementById("studentId").value;
 const academicRisk = parseFloat(document.getElementById("academicRisk").value);
 const assessmentRisk = parseFloat(document.getElementById("assessmentRisk").value);
 const behaviorScore = parseFloat(document.getElementById("behaviorScore").value);

 const result = calculateDropoutRisk(
   academicRisk,
   assessmentRisk,
   behaviorScore
 );

 /* ðŸ”¥ SAVE PREDICTION */
 await supabase.from("risk_predictions").insert([{
   studentId,
   weightedAcademic: result.weightedAcademic,
   weightedSocio: result.weightedSocio,
   weightedBehavior: result.weightedBehavior,
   totalRisk: result.totalRisk,
   category: result.category,
   createdAt: new Date()
 }])

 /* ðŸš¨ AUTO INTERVENTION */
 if(result.totalRisk >= 60){
   await supabase.from("interventions").insert([{
     studentId,
     interventionType: "Comprehensive Support",
     importance: 9,
     workability: 8,
     priorityScore: (9*8)/10,
     status: "PENDING",
     createdAt: new Date()
   }])
 }

 /* ðŸ“ˆ TIME TREND TRACKING */
 await supabase.from("risk_trends").insert([{
   studentId,
   year: new Date().getFullYear(),
   totalRisk: result.totalRisk,
   createdAt: new Date()
 }])

 document.getElementById("result").innerHTML =
   "Total Risk: " + result.totalRisk.toFixed(2) +
   "<br>Category: " + result.category;

}])

</script>

</body>
<script type="module" src="test.js"></script>
</html>
