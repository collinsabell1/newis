query ListAllStudents @auth(level: USER, insecureReason: "This operation is safe to expose to all logged in users.") {
  students {
    id
    firstName
    lastName
    studentId
    currentRiskLevel
    enrollmentDate
    academicDatas_on_student {
      gpa
      attendanceRate
    }
    behavioralEngagements_on_student {
      indicatorType
      scoreOrDescription
    }
  }
}

mutation CreateNewStudent($firstName: String!, $lastName: String!, $studentId: String!, $enrollmentDate: Date!, $currentRiskLevel: String!, $contactEmail: String, $contactPhone: String, $dateOfBirth: Date) @auth(level: USER) {
  student_insert(data: {
    firstName: $firstName,
    lastName: $lastName,
    studentId: $studentId,
    enrollmentDate: $enrollmentDate,
    currentRiskLevel: $currentRiskLevel,
    contactEmail: $contactEmail,
    contactPhone: $contactPhone,
    dateOfBirth: $dateOfBirth,
    createdAt_expr: "request.time"
  })
}

mutation UpdateStudentRiskLevel($studentId: UUID!, $newRiskLevel: String!) @auth(level: USER) {
  student_update(
    key: { id: $studentId },
    data: { currentRiskLevel: $newRiskLevel }
  )
}

mutation LogStudentIntervention($studentId: UUID!, $interventionDate: Date!, $interventionType: String!, $effectiveness: String!, $description: String, $followUpDate: Date) @auth(level: USER) {
  intervention_insert(data: {
    studentId: $studentId,
    loggedByUserId_expr: "auth.uid",
    interventionDate: $interventionDate,
    interventionType: $interventionType,
    effectiveness: $effectiveness,
    description: $description,
    followUpDate: $followUpDate
  })
}